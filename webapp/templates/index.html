<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily AI Feeds</title>
  <link href="https://unpkg.com/modern-css-reset/dist/reset.min.css" rel="stylesheet">
  <style>
    :root {
      --bg: #f5f6f7;
      --panel: #ffffff;
      --border: #e5e7eb;
      --text: #111827;
      --muted: #6b7280;
      --accent: #007aff;
      --shadow: 0 16px 40px rgba(17, 24, 39, 0.08);
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    body {
      background: radial-gradient(circle at 20% 20%, #f1f5ff 0, #f5f6f7 30%), radial-gradient(circle at 80% 0%, #f7f8ff 0, #f5f6f7 25%), #f5f6f7;
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Inter", "Segoe UI", sans-serif;
      padding: 32px 18px 64px;
    }
    .shell { max-width: 1180px; margin: 0 auto; }
    header { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 18px; }
    h1 { font-size: 28px; font-weight: 700; letter-spacing: -0.01em; }
    .pill { padding: 8px 12px; background: #eef2ff; color: #4338ca; border-radius: 999px; font-size: 12px; font-weight: 600; }
    form { display: grid; grid-template-columns: 1.3fr 0.7fr 0.35fr auto; gap: 12px; align-items: center; margin-bottom: 16px; }
    @media (max-width: 840px) { form { grid-template-columns: 1fr 1fr; } }
    @media (max-width: 540px) { form { grid-template-columns: 1fr; } }
    input, select {
      width: 100%;
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 12px 14px;
      border-radius: var(--radius);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }
    input:focus, select:focus { outline: 2px solid rgba(0,122,255,0.2); border-color: #cfd7ff; }
    button {
      background: linear-gradient(135deg, #0a84ff, #4facfe);
      color: #fff;
      border: none;
      padding: 12px 16px;
      border-radius: var(--radius);
      font-weight: 700;
      letter-spacing: 0.01em;
      box-shadow: 0 10px 22px rgba(10,132,255,0.24);
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 14px 28px rgba(10,132,255,0.28); }
    .meta { color: var(--muted); font-size: 13px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 18px; }
    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      box-shadow: var(--shadow);
    }
    .topline { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; font-size: 13px; color: var(--muted); }
    .badge { padding: 6px 10px; border-radius: 999px; background: #f1f5f9; border: 1px solid #e2e8f0; color: #0f172a; font-weight: 600; }
    .score { color: var(--accent); font-weight: 700; }
    .title { font-size: 18px; font-weight: 700; color: var(--text); line-height: 1.25; text-decoration: none; }
    .title:hover { color: #0a84ff; }
    .desc { color: #1f2937; font-size: 14px; line-height: 1.5; }
    .chips { display: flex; flex-wrap: wrap; gap: 6px; }
    .chip { padding: 6px 10px; border-radius: 10px; background: #f8fafc; border: 1px solid #e2e8f0; color: #0f172a; font-size: 12px; }
    .links { display: flex; gap: 12px; font-size: 13px; }
    .links a { color: var(--accent); text-decoration: none; font-weight: 600; }
    .links a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="shell">
    <h1>Daily AI Feeds</h1>
    <header>
      <h1>Daily AI Feeds</h1>
      <span class="pill">Structured → Web</span>
    </header>

    <form method="get">
      <input type="text" name="q" placeholder="搜索标题 / 关键词 / 描述" value="{{ q }}" aria-label="搜索">
      <select name="source" aria-label="来源">
        <option value="">全部来源</option>
        {% for s in sources %}
          <option value="{{ s }}" {% if s==current_source %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>
      <input type="number" name="limit" value="{{ limit }}" min="1" max="200" aria-label="条数">
      <button type="submit">筛选</button>
    </form>
    <div class="meta" style="margin-bottom: 14px;">共 {{ count }} 条（显示前 {{ count if count<limit else limit }} 条）</div>

    {% if items %}
    <div class="grid">
      {% for item in items %}
      <div class="card">
        <div class="topline">
          <span class="badge">{{ item.source }}</span>
          <span>{{ item.date }}</span>
          {% if item.rank %}<span>#{{ item.rank }}</span>{% endif %}
          {% if item.score and item.score.total is not none %}<span class="score">评分 {{ item.score.total }}</span>{% endif %}
        </div>
        <a class="title" href="{{ item.url }}" target="_blank" rel="noopener noreferrer">{{ item.title }}</a>
        {% if item.description_zh %}<div class="desc">{{ item.description_zh }}</div>{% elif item.description_en %}<div class="desc">{{ item.description_en }}</div>{% endif %}
        {% if item.keywords %}
        <div class="chips">
          {% for kw in item.keywords[:8] %}
            <span class="chip">{{ kw }}</span>
          {% endfor %}
        </div>
        {% endif %}
        <div class="topline">
          {% if item.metrics and item.metrics.votes %}<span>票 {{ item.metrics.votes }}</span>{% endif %}
          {% if item.metrics and item.metrics.stars %}<span>⭐ {{ item.metrics.stars }}</span>{% endif %}
        </div>
        <div class="links">
          <a href="{{ item.detail_url or item.url }}" target="_blank" rel="noopener noreferrer">详情</a>
          {% if item.media and item.media.image %}<a href="{{ item.media.image }}" target="_blank" rel="noopener noreferrer">封面</a>{% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      <p>暂无数据，请先运行抓取脚本生成 structured 数据。</p>
    {% endif %}
  </div>
</body>
</html>
